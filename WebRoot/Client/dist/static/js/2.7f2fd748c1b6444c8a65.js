webpackJsonp([2],{WC6M:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("mvHQ"),i=s.n(a),r=s("wjrB"),n=s("vMJZ"),o={name:"userInfo",components:{UploadImg:r.a},data:function(){return{userInfo:{avatar:"",nikeName:"",email:"",phone:"",sex:"2"},editUserInfo:{},dialogVisible:!1}},methods:{handleAvatarSuccess:function(t,e){t.status?this.editUserInfo.avatar=t.data.imgurl:this.$message.error("上传头像失败！")},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,s=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&s},dialogOpen:function(){this.editUserInfo=JSON.parse(i()(this.userInfo))},onSubmit:function(){var t=this;Object(n.n)(this.editUserInfo).then(function(e){!0===e.status?(t.$message({message:e.msg,type:"success"}),t.userInfo=JSON.parse(i()(t.editUserInfo))):(t.$message.error(e.msg),console.log(e))}),this.dialogVisible=!1}},mounted:function(){var t=this;Object(n.c)().then(function(e){if(e.status){var s=e.data;t.userInfo.avatar=s.avatar,t.userInfo.nikeName=s.nikeName,t.userInfo.phone=s.phone,t.userInfo.email=s.email,t.userInfo.sex=s.sex}else t.$message.error(e.msg)})}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"userInfo"}},[s("div",{staticClass:"title"},[t._v("个人信息"),s("el-link",{staticStyle:{color:"#000000",float:"right"},attrs:{icon:"el-icon-edit",underline:!1},on:{click:function(e){t.dialogVisible=!0}}},[t._v("编辑")])],1),t._v(" "),s("el-divider",{staticClass:"line-style"}),t._v(" "),s("div",{staticClass:"contain"},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple label"},[t._v("头像")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content grid-avatar"},[s("el-avatar",{attrs:{size:50,src:t.userInfo.avatar}})],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple label"},[t._v("昵称")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content grid-txt",domProps:{textContent:t._s(t.userInfo.nikeName)}})])],1),t._v(" "),s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple label"},[t._v("性别")])]),t._v(" "),s("el-col",{attrs:{span:20}},[0==t.userInfo.sex?s("div",{staticClass:"grid-content grid-txt"},[t._v("男")]):t._e(),t._v(" "),1==t.userInfo.sex?s("div",{staticClass:"grid-content grid-txt"},[t._v("女")]):t._e(),t._v(" "),2==t.userInfo.sex?s("div",{staticClass:"grid-content grid-txt"},[t._v("保密")]):t._e()])],1),t._v(" "),s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple label"},[t._v("电话")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content grid-txt",domProps:{textContent:t._s(t.userInfo.phone)}})])],1),t._v(" "),s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple label"},[t._v("邮箱")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content grid-txt",domProps:{textContent:t._s(t.userInfo.email)}})])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"编辑个人信息",visible:t.dialogVisible,width:"400px"},on:{"update:visible":function(e){t.dialogVisible=e},open:function(e){return t.dialogOpen()}}},[s("el-form",{attrs:{"label-width":"100px",model:t.editUserInfo}},[s("el-form-item",{attrs:{label:"头像"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://49.235.151.230:8091/file/imgUpdate","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.editUserInfo.avatar?s("img",{staticClass:"avatar",attrs:{src:t.editUserInfo.avatar}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),s("el-form-item",{attrs:{label:"昵称"}},[s("el-input",{model:{value:t.editUserInfo.nikeName,callback:function(e){t.$set(t.editUserInfo,"nikeName",e)},expression:"editUserInfo.nikeName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"性别"}},[s("el-radio-group",{model:{value:t.editUserInfo.sex,callback:function(e){t.$set(t.editUserInfo,"sex",e)},expression:"editUserInfo.sex"}},[s("el-radio",{attrs:{label:"0"}},[t._v("男")]),t._v(" "),s("el-radio",{attrs:{label:"1"}},[t._v("女")]),t._v(" "),s("el-radio",{attrs:{label:"2"}},[t._v("保密")])],1)],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=s("VU/8")(o,l,!1,function(t){s("g2hg")},"data-v-6cbf66ec",null);e.default=c.exports},g2hg:function(t,e){},mvHQ:function(t,e,s){t.exports={default:s("qkKv"),__esModule:!0}},qkKv:function(t,e,s){var a=s("FeBl"),i=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}}});
//# sourceMappingURL=2.7f2fd748c1b6444c8a65.js.map